# Dummy WSGI Framework

Проект "глупенького" WSGI-фрейморка (хотя он не так уж и "глуп", как кажется). 
Позволяет отображать представления, генерируемые внутри контроллеров или подгружаемые из HTML-файлов.
Расширяем за счет открытых WSGI-интерфейсов диспетчера и контроллеров.

## Как пользоваться

### Требования

Не имеет. 

### Установка

Скопируйте к себе папку **_dummy_wsgi_framework_**.

### Примеры

Примеры реализованных приложений:
* [APP - dummy_wsgi_framework/app](https://github.com/BorisPlus/otus_webpython_003/tree/master/dummy_wsgi_framework/app)
* [APP_001 - dummy_wsgi_framework/app_001](https://github.com/BorisPlus/otus_webpython_003/tree/master/dummy_wsgi_framework/app_001)


#### Пример [APP - dummy_wsgi_framework/app](https://github.com/BorisPlus/otus_webpython_003/tree/master/dummy_wsgi_framework/app)

Содержит демонстрационный вариант реализации Веб-приложения.
А именно:
* отработку контроллера без представления и с использованием кириллицы
* отработку контроллера с представлением в виде HTML-файла и с использованием кириллицы
* отработку контроллера со случайно потерянным\нереализованным представлением в виде HTML-файла и с использованием кириллицы
* отработку диспетчера с априори несуществующи контроллером

Он же выступает в качестве шаблона Ваших приложений.

#### Руководство разработчика
1. Папка **_dummy_wsgi_framework_** - это и есть фреймворк с функциональным ядром в папке **_dummy_wsgi_framework/framework_core_**
2. Ваше приложение, например **_app_002_**, необходимо будет разместить в папке **_dummy_wsgi_framework_**
3. Для быстрого старта, скопируйте папку **_app.template_**, переименовав ее, например, в **_app_002_**
4. Подробнее о структуре приложения:
 
Файл **_config.py_** содержит конфигурационные переменные, предпочтительно без должного опыта не изменять существующие и
добавлять свои конфигурационные переменные именно сюда.

Приведите в соответствие маршруты до контроллелов в файле **_routes.py_**, изменив словарь
```python
uri_routes = {
    ...
    '/page_by_url': 'page_by_url.py',
    ...
}
```
, где ключ словаря _'/page_by_url'_ - это последующая после доменного имени или ip адреса часть url
, а значение словаря _'page_by_url.py'_ - это Python-файл контроллера, реализующего догику реакции на переход по соответствующей (указана в ключе) ссылке.
Python-файл контроллера необходимо разместить в подпапке controllers.

За перенаправление http-запросов к контроллерам в соответствии с маршрутами из **_routes.py_**
отвечает диспетчер  **_app_dispatcher.py_**. Его и нужно будет запускать в качестве основной входной точки
вашего WSGI-приложения.

```bash
uwsgi --http 127.0.0.1:9090 --wsgi-file /<absolute_path>/dummy_wsgi_framework/app_002/app_dispatcher.py
```
, но об этом позже.

Создайте свои контроллеры, реализовав их логику работы (можно взять шаблонные 
с подгрузкой html и без, или реализовать свои, например, с посылкой 
специальных HTTP-заголовков для _Basic Access Authentication_). Внимательно следите за тем,
какие части каких приложений Вы импортируете.

```python
from dummy_wsgi_framework.app.config import (
    APP_ROOT_DIR_NAME,
)
```
или (найдите одно отличие)

```python
from dummy_wsgi_framework.app_002.config import (
    APP_ROOT_DIR_NAME,
)
```
Основным методом в интерфейсе вызова вашего контроллера является функция **_controller_response_**.
Обязательно реализуйте ее, иначе диспетчер не сможет исполнить соответствующий контроллер.

Контроллеры могут использовать html-шаблоны страниц, которые вы можете разместить в совем приложении 
в отведенном для них месте **_dummy_wsgi_framework/app_002/views_**

5. запустите свое приложение удобным Вам способом, например,
```bash
uwsgi --http 127.0.0.1:9090 --wsgi-file /<absolute_path>/dummy_wsgi_framework/app_002/app_dispatcher.py
```
Таким образом у Вас есть возможность создать несколько приложений, запуская их на разных портах серверов.
Имеется ввиду, что у каждого приложения свой диспетчер запросов.

Диспетчер в соответствии с переданным ему uri по имеющимя данным в маршрутах заставит отработать
соответствующий данному uri контроллер, который в свою очередь может использовать статическое представление.
Вариант реализации подгрузки представления контроллелом реализован в методе render_view_or_404 ядра фреймворка. 

**Cхематично:** 

**_START_** -> app_002/app_dispatcher.py -> [call] ->  
 -> app_002/controllers/uri_controller.controller_response -> [load] ->  
  -> app_002/views/uri_controller_view -> **_END_**
        
## Лицензия

Распространяется свободно.

## Дополнительные сведения

Проект в рамках трехдневного домашнего задания курса "Web-разработчик на Python" на https://otus.ru/learning

Прошу понять и простить.

Но Вам не кажется, что **Dummy WSGI Framework** не так уж и "глуп"?

